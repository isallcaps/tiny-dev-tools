import{a as Gt}from"./chunk-AX5ACSWD.js";import{a as Ut,b as Qt,c as Kt,i as $t}from"./chunk-KUJNM7KG.js";import{c as Ve,e as zt,g as at}from"./chunk-3FFFKZ2A.js";import{$a as _e,Aa as v,Ab as jt,Eb as ye,F as Ct,Ga as Ft,Hb as At,Ib as ue,Jb as Lt,K as xt,Kb as rt,L as kt,N as wt,Na as me,Oa as Ot,Pa as ge,Qa as Tt,Ra as qe,T as Nt,U as It,Vb as Bt,Wa as je,Xa as X,Y as j,Ya as ee,Za as Se,_a as ve,_b as Vt,a as He,ab as H,b as Ue,ba as Z,bb as f,c as pn,ca as Y,cb as h,cc as Pt,d as fn,db as z,dc as Jt,ea as Et,eb as Ke,ec as Ht,fa as Ee,fb as Ae,fc as ot,g as bt,gb as be,h as yt,ha as xe,hb as ke,ia as St,ib as G,jb as Mt,kb as I,ma as he,na as tt,nb as nt,ob as qt,pa as Dt,pb as Le,qa as Rt,qb as Be,ra as Qe,rb as it,sa as Me,sb as De,ub as N,vb as we,wb as ce,zb as $e}from"./chunk-BNQO7YMM.js";var Wt=pn((st,lt)=>{((i,a)=>{typeof define=="function"&&define.amd?define([],a):typeof lt=="object"&&typeof st<"u"?lt.exports=a():i.Papa=a()})(st,function i(){var a=typeof self<"u"?self:typeof window<"u"?window:a!==void 0?a:{},e,r=!a.document&&!!a.postMessage,o=a.IS_PAPA_WORKER||!1,c={},x=0,p={};function re(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(n){var s=Xe(n);s.chunkSize=parseInt(s.chunkSize),n.step||n.chunk||(s.chunkSize=null),this._handle=new ht(s),(this._handle.streamer=this)._config=s}.call(this,t),this.parseChunk=function(n,s){var d=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<d){let _=this._config.newline;_||(l=this._config.quoteChar||'"',_=this._handle.guessLineEndings(n,l)),n=[...n.split(_).slice(d)].join(_)}this.isFirstChunk&&R(this._config.beforeFirstChunk)&&(l=this._config.beforeFirstChunk(n))!==void 0&&(n=l),this.isFirstChunk=!1,this._halted=!1;var d=this._partialLine+n,l=(this._partialLine="",this._handle.parse(d,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(n=l.meta.cursor,d=(this._finished||(this._partialLine=d.substring(n-this._baseIndex),this._baseIndex=n),l&&l.data&&(this._rowCount+=l.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)a.postMessage({results:l,workerId:p.WORKER_ID,finished:d});else if(R(this._config.chunk)&&!s){if(this._config.chunk(l,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=l=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(l.data),this._completeResults.errors=this._completeResults.errors.concat(l.errors),this._completeResults.meta=l.meta),this._completed||!d||!R(this._config.complete)||l&&l.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),d||l&&l.meta.paused||this._nextChunk(),l}this._halted=!0},this._sendError=function(n){R(this._config.error)?this._config.error(n):o&&this._config.error&&a.postMessage({workerId:p.WORKER_ID,error:n,finished:!1})}}function Ce(t){var n;(t=t||{}).chunkSize||(t.chunkSize=p.RemoteChunkSize),re.call(this,t),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(s){this._input=s,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(n=new XMLHttpRequest,this._config.withCredentials&&(n.withCredentials=this._config.withCredentials),r||(n.onload=fe(this._chunkLoaded,this),n.onerror=fe(this._chunkError,this)),n.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var s,d=this._config.downloadRequestHeaders;for(s in d)n.setRequestHeader(s,d[s])}var l;this._config.chunkSize&&(l=this._start+this._config.chunkSize-1,n.setRequestHeader("Range","bytes="+this._start+"-"+l));try{n.send(this._config.downloadRequestBody)}catch(_){this._chunkError(_.message)}r&&n.status===0&&this._chunkError()}},this._chunkLoaded=function(){n.readyState===4&&(n.status<200||400<=n.status?this._chunkError():(this._start+=this._config.chunkSize||n.responseText.length,this._finished=!this._config.chunkSize||this._start>=(s=>(s=s.getResponseHeader("Content-Range"))!==null?parseInt(s.substring(s.lastIndexOf("/")+1)):-1)(n),this.parseChunk(n.responseText)))},this._chunkError=function(s){s=n.statusText||s,this._sendError(new Error(s))}}function pe(t){(t=t||{}).chunkSize||(t.chunkSize=p.LocalChunkSize),re.call(this,t);var n,s,d=typeof FileReader<"u";this.stream=function(l){this._input=l,s=l.slice||l.webkitSlice||l.mozSlice,d?((n=new FileReader).onload=fe(this._chunkLoaded,this),n.onerror=fe(this._chunkError,this)):n=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var l=this._input,_=(this._config.chunkSize&&(_=Math.min(this._start+this._config.chunkSize,this._input.size),l=s.call(l,this._start,_)),n.readAsText(l,this._config.encoding));d||this._chunkLoaded({target:{result:_}})},this._chunkLoaded=function(l){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(l.target.result)},this._chunkError=function(){this._sendError(n.error)}}function le(t){var n;re.call(this,t=t||{}),this.stream=function(s){return n=s,this._nextChunk()},this._nextChunk=function(){var s,d;if(!this._finished)return s=this._config.chunkSize,n=s?(d=n.substring(0,s),n.substring(s)):(d=n,""),this._finished=!n,this.parseChunk(d)}}function Je(t){re.call(this,t=t||{});var n=[],s=!0,d=!1;this.pause=function(){re.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){re.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(l){this._input=l,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){d&&n.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),n.length?this.parseChunk(n.shift()):s=!0},this._streamData=fe(function(l){try{n.push(typeof l=="string"?l:l.toString(this._config.encoding)),s&&(s=!1,this._checkIsFinished(),this.parseChunk(n.shift()))}catch(_){this._streamError(_)}},this),this._streamError=fe(function(l){this._streamCleanUp(),this._sendError(l)},this),this._streamEnd=fe(function(){this._streamCleanUp(),d=!0,this._streamData("")},this),this._streamCleanUp=fe(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function ht(t){var n,s,d,l,_=Math.pow(2,53),L=-_,te=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ne=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,C=this,M=0,m=0,Q=!1,g=!1,k=[],u={data:[],errors:[],meta:{}};function B(w){return t.skipEmptyLines==="greedy"?w.join("").trim()==="":w.length===1&&w[0].length===0}function A(){if(u&&d&&(ie("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+p.DefaultDelimiter+"'"),d=!1),t.skipEmptyLines&&(u.data=u.data.filter(function(F){return!B(F)})),U()){let F=function(P,O){R(t.transformHeader)&&(P=t.transformHeader(P,O)),k.push(P)};var b=F;if(u)if(Array.isArray(u.data[0])){for(var w=0;U()&&w<u.data.length;w++)u.data[w].forEach(F);u.data.splice(0,1)}else u.data.forEach(F)}function E(F,P){for(var O=t.header?{}:[],D=0;D<F.length;D++){var y=D,K=F[D],K=((S,T)=>(V=>(t.dynamicTypingFunction&&t.dynamicTyping[V]===void 0&&(t.dynamicTyping[V]=t.dynamicTypingFunction(V)),(t.dynamicTyping[V]||t.dynamicTyping)===!0))(S)?T==="true"||T==="TRUE"||T!=="false"&&T!=="FALSE"&&((V=>{if(te.test(V)&&(V=parseFloat(V),L<V&&V<_))return 1})(T)?parseFloat(T):ne.test(T)?new Date(T):T===""?null:T):T)(y=t.header?D>=k.length?"__parsed_extra":k[D]:y,K=t.transform?t.transform(K,y):K);y==="__parsed_extra"?(O[y]=O[y]||[],O[y].push(K)):O[y]=K}return t.header&&(D>k.length?ie("FieldMismatch","TooManyFields","Too many fields: expected "+k.length+" fields but parsed "+D,m+P):D<k.length&&ie("FieldMismatch","TooFewFields","Too few fields: expected "+k.length+" fields but parsed "+D,m+P)),O}var q;u&&(t.header||t.dynamicTyping||t.transform)&&(q=1,!u.data.length||Array.isArray(u.data[0])?(u.data=u.data.map(E),q=u.data.length):u.data=E(u.data,0),t.header&&u.meta&&(u.meta.fields=k),m+=q)}function U(){return t.header&&k.length===0}function ie(w,E,q,b){w={type:w,code:E,message:q},b!==void 0&&(w.row=b),u.errors.push(w)}R(t.step)&&(l=t.step,t.step=function(w){u=w,U()?A():(A(),u.data.length!==0&&(M+=w.data.length,t.preview&&M>t.preview?s.abort():(u.data=u.data[0],l(u,C))))}),this.parse=function(w,E,q){var b=t.quoteChar||'"',b=(t.newline||(t.newline=this.guessLineEndings(w,b)),d=!1,t.delimiter?R(t.delimiter)&&(t.delimiter=t.delimiter(w),u.meta.delimiter=t.delimiter):((b=((F,P,O,D,y)=>{var K,S,T,V;y=y||[",","	","|",";",p.RECORD_SEP,p.UNIT_SEP];for(var Ne=0;Ne<y.length;Ne++){for(var oe,Oe=y[Ne],$=0,ae=0,J=0,W=(T=void 0,new Ye({comments:D,delimiter:Oe,newline:P,preview:10}).parse(F)),de=0;de<W.data.length;de++)O&&B(W.data[de])?J++:(oe=W.data[de].length,ae+=oe,T===void 0?T=oe:0<oe&&($+=Math.abs(oe-T),T=oe));0<W.data.length&&(ae/=W.data.length-J),(S===void 0||$<=S)&&(V===void 0||V<ae)&&1.99<ae&&(S=$,K=Oe,V=ae)}return{successful:!!(t.delimiter=K),bestDelimiter:K}})(w,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess)).successful?t.delimiter=b.bestDelimiter:(d=!0,t.delimiter=p.DefaultDelimiter),u.meta.delimiter=t.delimiter),Xe(t));return t.preview&&t.header&&b.preview++,n=w,s=new Ye(b),u=s.parse(n,E,q),A(),Q?{meta:{paused:!0}}:u||{meta:{paused:!1}}},this.paused=function(){return Q},this.pause=function(){Q=!0,s.abort(),n=R(t.chunk)?"":n.substring(s.getCharIndex())},this.resume=function(){C.streamer._halted?(Q=!1,C.streamer.parseChunk(n,!0)):setTimeout(C.resume,3)},this.aborted=function(){return g},this.abort=function(){g=!0,s.abort(),u.meta.aborted=!0,R(t.complete)&&t.complete(u),n=""},this.guessLineEndings=function(F,b){F=F.substring(0,1048576);var b=new RegExp(Fe(b)+"([^]*?)"+Fe(b),"gm"),q=(F=F.replace(b,"")).split("\r"),b=F.split(`
`),F=1<b.length&&b[0].length<q[0].length;if(q.length===1||F)return`
`;for(var P=0,O=0;O<q.length;O++)q[O][0]===`
`&&P++;return P>=q.length/2?`\r
`:"\r"}}function Fe(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ye(t){var n=(t=t||{}).delimiter,s=t.newline,d=t.comments,l=t.step,_=t.preview,L=t.fastMode,te=null,ne=!1,C=t.quoteChar==null?'"':t.quoteChar,M=C;if(t.escapeChar!==void 0&&(M=t.escapeChar),(typeof n!="string"||-1<p.BAD_DELIMITERS.indexOf(n))&&(n=","),d===n)throw new Error("Comment character same as delimiter");d===!0?d="#":(typeof d!="string"||-1<p.BAD_DELIMITERS.indexOf(d))&&(d=!1),s!==`
`&&s!=="\r"&&s!==`\r
`&&(s=`
`);var m=0,Q=!1;this.parse=function(g,k,u){if(typeof g!="string")throw new Error("Input must be a string");var B=g.length,A=n.length,U=s.length,ie=d.length,w=R(l),E=[],q=[],b=[],F=m=0;if(!g)return $();if(L||L!==!1&&g.indexOf(C)===-1){for(var P=g.split(s),O=0;O<P.length;O++){if(b=P[O],m+=b.length,O!==P.length-1)m+=s.length;else if(u)return $();if(!d||b.substring(0,ie)!==d){if(w){if(E=[],V(b.split(n)),ae(),Q)return $()}else V(b.split(n));if(_&&_<=O)return E=E.slice(0,_),$(!0)}}return $()}for(var D=g.indexOf(n,m),y=g.indexOf(s,m),K=new RegExp(Fe(M)+Fe(C),"g"),S=g.indexOf(C,m);;)if(g[m]===C)for(S=m,m++;;){if((S=g.indexOf(C,S+1))===-1)return u||q.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:E.length,index:m}),oe();if(S===B-1)return oe(g.substring(m,S).replace(K,C));if(C===M&&g[S+1]===M)S++;else if(C===M||S===0||g[S-1]!==M){D!==-1&&D<S+1&&(D=g.indexOf(n,S+1));var T=Ne((y=y!==-1&&y<S+1?g.indexOf(s,S+1):y)===-1?D:Math.min(D,y));if(g.substr(S+1+T,A)===n){b.push(g.substring(m,S).replace(K,C)),g[m=S+1+T+A]!==C&&(S=g.indexOf(C,m)),D=g.indexOf(n,m),y=g.indexOf(s,m);break}if(T=Ne(y),g.substring(S+1+T,S+1+T+U)===s){if(b.push(g.substring(m,S).replace(K,C)),Oe(S+1+T+U),D=g.indexOf(n,m),S=g.indexOf(C,m),w&&(ae(),Q))return $();if(_&&E.length>=_)return $(!0);break}q.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:E.length,index:m}),S++}}else if(d&&b.length===0&&g.substring(m,m+ie)===d){if(y===-1)return $();m=y+U,y=g.indexOf(s,m),D=g.indexOf(n,m)}else if(D!==-1&&(D<y||y===-1))b.push(g.substring(m,D)),m=D+A,D=g.indexOf(n,m);else{if(y===-1)break;if(b.push(g.substring(m,y)),Oe(y+U),w&&(ae(),Q))return $();if(_&&E.length>=_)return $(!0)}return oe();function V(J){E.push(J),F=m}function Ne(J){var W=0;return W=J!==-1&&(J=g.substring(S+1,J))&&J.trim()===""?J.length:W}function oe(J){return u||(J===void 0&&(J=g.substring(m)),b.push(J),m=B,V(b),w&&ae()),$()}function Oe(J){m=J,V(b),b=[],y=g.indexOf(s,m)}function $(J){if(t.header&&!k&&E.length&&!ne){var W=E[0],de=Object.create(null),et=new Set(W);let vt=!1;for(let Ie=0;Ie<W.length;Ie++){let se=W[Ie];if(de[se=R(t.transformHeader)?t.transformHeader(se,Ie):se]){let Te,_t=de[se];for(;Te=se+"_"+_t,_t++,et.has(Te););et.add(Te),W[Ie]=Te,de[se]++,vt=!0,(te=te===null?{}:te)[Te]=se}else de[se]=1,W[Ie]=se;et.add(se)}vt&&console.warn("Duplicate headers found and renamed."),ne=!0}return{data:E,errors:q,meta:{delimiter:n,linebreak:s,aborted:Q,truncated:!!J,cursor:F+(k||0),renamedHeaders:te}}}function ae(){l($()),E=[],q=[]}},this.abort=function(){Q=!0},this.getCharIndex=function(){return m}}function un(t){var n=t.data,s=c[n.workerId],d=!1;if(n.error)s.userError(n.error,n.file);else if(n.results&&n.results.data){var l={abort:function(){d=!0,mt(n.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:gt,resume:gt};if(R(s.userStep)){for(var _=0;_<n.results.data.length&&(s.userStep({data:n.results.data[_],errors:n.results.errors,meta:n.results.meta},l),!d);_++);delete n.results}else R(s.userChunk)&&(s.userChunk(n.results,l,n.file),delete n.results)}n.finished&&!d&&mt(n.workerId,n.results)}function mt(t,n){var s=c[t];R(s.userComplete)&&s.userComplete(n),s.terminate(),delete c[t]}function gt(){throw new Error("Not implemented.")}function Xe(t){if(typeof t!="object"||t===null)return t;var n,s=Array.isArray(t)?[]:{};for(n in t)s[n]=Xe(t[n]);return s}function fe(t,n){return function(){t.apply(n,arguments)}}function R(t){return typeof t=="function"}return p.parse=function(t,n){var s=(n=n||{}).dynamicTyping||!1;if(R(s)&&(n.dynamicTypingFunction=s,s={}),n.dynamicTyping=s,n.transform=!!R(n.transform)&&n.transform,!n.worker||!p.WORKERS_SUPPORTED)return s=null,p.NODE_STREAM_INPUT,typeof t=="string"?(t=(d=>d.charCodeAt(0)!==65279?d:d.slice(1))(t),s=new(n.download?Ce:le)(n)):t.readable===!0&&R(t.read)&&R(t.on)?s=new Je(n):(a.File&&t instanceof File||t instanceof Object)&&(s=new pe(n)),s.stream(t);(s=(()=>{var d;return!!p.WORKERS_SUPPORTED&&(d=(()=>{var l=a.URL||a.webkitURL||null,_=i.toString();return p.BLOB_URL||(p.BLOB_URL=l.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",_,")();"],{type:"text/javascript"})))})(),(d=new a.Worker(d)).onmessage=un,d.id=x++,c[d.id]=d)})()).userStep=n.step,s.userChunk=n.chunk,s.userComplete=n.complete,s.userError=n.error,n.step=R(n.step),n.chunk=R(n.chunk),n.complete=R(n.complete),n.error=R(n.error),delete n.worker,s.postMessage({input:t,config:n,workerId:s.id})},p.unparse=function(t,n){var s=!1,d=!0,l=",",_=`\r
`,L='"',te=L+L,ne=!1,C=null,M=!1,m=((()=>{if(typeof n=="object"){if(typeof n.delimiter!="string"||p.BAD_DELIMITERS.filter(function(k){return n.delimiter.indexOf(k)!==-1}).length||(l=n.delimiter),typeof n.quotes!="boolean"&&typeof n.quotes!="function"&&!Array.isArray(n.quotes)||(s=n.quotes),typeof n.skipEmptyLines!="boolean"&&typeof n.skipEmptyLines!="string"||(ne=n.skipEmptyLines),typeof n.newline=="string"&&(_=n.newline),typeof n.quoteChar=="string"&&(L=n.quoteChar),typeof n.header=="boolean"&&(d=n.header),Array.isArray(n.columns)){if(n.columns.length===0)throw new Error("Option columns is empty");C=n.columns}n.escapeChar!==void 0&&(te=n.escapeChar+L),n.escapeFormulae instanceof RegExp?M=n.escapeFormulae:typeof n.escapeFormulae=="boolean"&&n.escapeFormulae&&(M=/^[=+\-@\t\r].*$/)}})(),new RegExp(Fe(L),"g"));if(typeof t=="string"&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return Q(null,t,ne);if(typeof t[0]=="object")return Q(C||Object.keys(t[0]),t,ne)}else if(typeof t=="object")return typeof t.data=="string"&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||C),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:typeof t.data[0]=="object"?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||typeof t.data[0]=="object"||(t.data=[t.data])),Q(t.fields||[],t.data||[],ne);throw new Error("Unable to serialize unrecognized input");function Q(k,u,B){var A="",U=(typeof k=="string"&&(k=JSON.parse(k)),typeof u=="string"&&(u=JSON.parse(u)),Array.isArray(k)&&0<k.length),ie=!Array.isArray(u[0]);if(U&&d){for(var w=0;w<k.length;w++)0<w&&(A+=l),A+=g(k[w],w);0<u.length&&(A+=_)}for(var E=0;E<u.length;E++){var q=(U?k:u[E]).length,b=!1,F=U?Object.keys(u[E]).length===0:u[E].length===0;if(B&&!U&&(b=B==="greedy"?u[E].join("").trim()==="":u[E].length===1&&u[E][0].length===0),B==="greedy"&&U){for(var P=[],O=0;O<q;O++){var D=ie?k[O]:O;P.push(u[E][D])}b=P.join("").trim()===""}if(!b){for(var y=0;y<q;y++){0<y&&!F&&(A+=l);var K=U&&ie?k[y]:y;A+=g(u[E][K],y)}E<u.length-1&&(!B||0<q&&!F)&&(A+=_)}}return A}function g(k,u){var B,A;return k==null?"":k.constructor===Date?JSON.stringify(k).slice(1,25):(A=!1,M&&typeof k=="string"&&M.test(k)&&(k="'"+k,A=!0),B=k.toString().replace(m,te),(A=A||s===!0||typeof s=="function"&&s(k,u)||Array.isArray(s)&&s[u]||((U,ie)=>{for(var w=0;w<ie.length;w++)if(-1<U.indexOf(ie[w]))return!0;return!1})(B,p.BAD_DELIMITERS)||-1<B.indexOf(l)||B.charAt(0)===" "||B.charAt(B.length-1)===" ")?L+B+L:B)}},p.RECORD_SEP="",p.UNIT_SEP="",p.BYTE_ORDER_MARK="\uFEFF",p.BAD_DELIMITERS=["\r",`
`,'"',p.BYTE_ORDER_MARK],p.WORKERS_SUPPORTED=!r&&!!a.Worker,p.NODE_STREAM_INPUT=1,p.LocalChunkSize=10485760,p.RemoteChunkSize=5242880,p.DefaultDelimiter=",",p.Parser=Ye,p.ParserHandle=ht,p.NetworkStreamer=Ce,p.FileStreamer=pe,p.StringStreamer=le,p.ReadableStreamStreamer=Je,a.jQuery&&((e=a.jQuery).fn.parse=function(t){var n=t.config||{},s=[];return this.each(function(_){if(!(e(this).prop("tagName").toUpperCase()==="INPUT"&&e(this).attr("type").toLowerCase()==="file"&&a.FileReader)||!this.files||this.files.length===0)return!0;for(var L=0;L<this.files.length;L++)s.push({file:this.files[L],inputElem:this,instanceConfig:e.extend({},n)})}),d(),this;function d(){if(s.length===0)R(t.complete)&&t.complete();else{var _,L,te,ne,C=s[0];if(R(t.before)){var M=t.before(C.file,C.inputElem);if(typeof M=="object"){if(M.action==="abort")return _="AbortError",L=C.file,te=C.inputElem,ne=M.reason,void(R(t.error)&&t.error({name:_},L,te,ne));if(M.action==="skip")return void l();typeof M.config=="object"&&(C.instanceConfig=e.extend(C.instanceConfig,M.config))}else if(M==="skip")return void l()}var m=C.instanceConfig.complete;C.instanceConfig.complete=function(Q){R(m)&&m(Q,C.file,C.inputElem),l()},p.parse(C.file,C.instanceConfig)}}function l(){s.splice(0,1),d()}}),o&&(a.onmessage=function(t){t=t.data,p.WORKER_ID===void 0&&t&&(p.WORKER_ID=t.workerId),typeof t.input=="string"?a.postMessage({workerId:p.WORKER_ID,results:p.parse(t.input,t.config),finished:!0}):(a.File&&t.input instanceof File||t.input instanceof Object)&&(t=p.parse(t.input,t.config))&&a.postMessage({workerId:p.WORKER_ID,results:t,finished:!0})}),(Ce.prototype=Object.create(re.prototype)).constructor=Ce,(pe.prototype=Object.create(re.prototype)).constructor=pe,(le.prototype=Object.create(le.prototype)).constructor=le,(Je.prototype=Object.create(re.prototype)).constructor=Je,p})});var Yt=fn(Wt());function Xt(i){return Yt.parse(i,{header:!0,skipEmptyLines:!0,transformHeader:e=>e.trim()}).data.map(e=>({jiraField:e.jiraField||"",jiraValue:e.jiraValue||"",description:e.description||"",group:e.group||""}))}function dt(i){let a={};for(let e of i){let r=e.jiraField?.trim();if(!r)continue;a[r]||(a[r]={ungrouped:[],groups:{}});let o=e.group?.trim();o?(a[r].groups[o]||(a[r].groups[o]=[]),a[r].groups[o].push(e)):a[r].ungrouped.push(e)}return a}function en(i,a){let e=[];for(let r of Object.keys(i)){let o=i[r],c=[],x=[...o.ungrouped,...Object.values(o.groups).flat()];for(let pe of x){let le=pe.jiraValue?.trim();le&&a[r]?.[le]&&c.push(le)}if(!c.length)continue;let p=Array.from(new Set(c)).sort(),Ce=/[^\w]/.test(r)?`"${r}"`:r;if(p.length===1)e.push(`${Ce} = ${Zt(p[0])}`);else{let pe=p.map(Zt).join(", ");e.push(`${Ce} in (${pe})`)}}return e.join(" AND ")}function Zt(i){return i?/[^\w]/.test(i)||i.includes("-")?`"${i.replace(/"/g,'\\"')}"`:i:"EMPTY"}function Re(i){i||(i=j(Ee));let a=new bt(e=>{if(i.destroyed){e.next();return}return i.onDestroy(e.next.bind(e))});return e=>e.pipe(wt(a))}var hn=["ngbNavOutlet",""],mn=i=>({$implicit:i});function gn(i,a){}function vn(i,a){if(i&1&&(f(0,"div",0),qe(1,gn,0,0,"ng-template",1),h()),i&2){let e=I().$implicit,r=I();H("item",e)("nav",r.nav)("role",r.paneRole),v(),H("ngTemplateOutlet",(e.contentTpl==null?null:e.contentTpl.templateRef)||null)("ngTemplateOutletContext",jt(5,mn,e.active||r.isPanelTransitioning(e)))}}function _n(i,a){if(i&1&&X(0,vn,2,7,"div",0),i&2){let e=a.$implicit,r=I();ee(e.isPanelInDom()||r.isPanelTransitioning(e)?0:-1)}}var bn=(()=>{class i{constructor(){this._ngbConfig=j(Gt),this.destroyOnHide=!0,this.orientation="horizontal",this.roles="tablist",this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(e){this._animation=e}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),nn=i=>Ve(i)&&i!=="",yn=0,ut=(()=>{class i{constructor(){this.templateRef=j(Ft)}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275dir=ge({type:i,selectors:[["ng-template","ngbNavContent",""]]})}}return i})(),rn=(()=>{class i{constructor(e){this.role=e,this.nav=j(Pe)}static{this.\u0275fac=function(r){return new(r||i)(Qe("role"))}}static{this.\u0275dir=ge({type:i,selectors:[["","ngbNavItem","",5,"ng-container"]],hostVars:1,hostBindings:function(r,o){r&2&&je("role",o.role?o.role:o.nav.roles?"presentation":void 0)}})}}return i})(),Ge=(()=>{class i{constructor(){this._nav=j(Pe),this._nativeElement=j(Me).nativeElement,this.disabled=!1,this.shown=new xe,this.hidden=new xe}ngOnInit(){Ve(this.domId)||(this.domId=`ngb-nav-${yn++}`)}get active(){return this._nav.activeId===this.id}get id(){return nn(this._id)?this._id:this.domId}get panelDomId(){return`${this.domId}-panel`}isPanelInDom(){return(Ve(this.destroyOnHide)?!this.destroyOnHide:!this._nav.destroyOnHide)||this.active}isNgContainer(){return this._nativeElement.nodeType===Node.COMMENT_NODE}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275dir=ge({type:i,selectors:[["","ngbNavItem",""]],contentQueries:function(r,o,c){if(r&1&&nt(c,ut,4),r&2){let x;Le(x=Be())&&(o.contentTpl=x.first)}},hostAttrs:[1,"nav-item"],inputs:{destroyOnHide:"destroyOnHide",disabled:"disabled",domId:"domId",_id:[0,"ngbNavItem","_id"]},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbNavItem"]})}}return i})(),Pe=(()=>{class i{constructor(e){this.role=e,this._config=j(bn),this._cd=j(rt),this._document=j(Et),this._nativeElement=j(Me).nativeElement,this.destroyRef=j(Ee),this._navigatingWithKeyboard=!1,this.activeIdChange=new xe,this.animation=this._config.animation,this.destroyOnHide=this._config.destroyOnHide,this.orientation=this._config.orientation,this.roles=this._config.roles,this.keyboard=this._config.keyboard,this.shown=new xe,this.hidden=new xe,this.navItemChange$=new yt,this.navChange=new xe}click(e){e.disabled||this._updateActiveId(e.id)}onFocusout({relatedTarget:e}){this._nativeElement.contains(e)||(this._navigatingWithKeyboard=!1)}onKeyDown(e){if(this.roles!=="tablist"||!this.keyboard)return;let r=this.links.filter(x=>!x.navItem.disabled),{length:o}=r,c=-1;if(r.forEach((x,p)=>{x.nativeElement===this._document.activeElement&&(c=p)}),o){switch(e.key){case"ArrowUp":case"ArrowLeft":c=(c-1+o)%o;break;case"ArrowRight":case"ArrowDown":c=(c+1)%o;break;case"Home":c=0;break;case"End":c=o-1;break}this.keyboard==="changeWithArrows"&&this.select(r[c].navItem.id),r[c].nativeElement.focus(),this._navigatingWithKeyboard=!0,e.preventDefault()}}select(e){this._updateActiveId(e,!1)}ngAfterContentInit(){if(!Ve(this.activeId)){let e=this.items.first?this.items.first.id:null;nn(e)&&(this._updateActiveId(e,!1),this._cd.detectChanges())}this.items.changes.pipe(Re(this.destroyRef)).subscribe(()=>this._notifyItemChanged(this.activeId))}ngOnChanges({activeId:e}){e&&!e.firstChange&&this._notifyItemChanged(e.currentValue)}_updateActiveId(e,r=!0){if(this.activeId!==e){let o=!1;r&&this.navChange.emit({activeId:this.activeId,nextId:e,preventDefault:()=>{o=!0}}),o||(this.activeId=e,this.activeIdChange.emit(e),this._notifyItemChanged(e))}}_notifyItemChanged(e){this.navItemChange$.next(this._getItemById(e))}_getItemById(e){return this.items&&this.items.find(r=>r.id===e)||null}static{this.\u0275fac=function(r){return new(r||i)(Qe("role"))}}static{this.\u0275dir=ge({type:i,selectors:[["","ngbNav",""]],contentQueries:function(r,o,c){if(r&1&&nt(c,Ge,4)(c,ze,5),r&2){let x;Le(x=Be())&&(o.items=x),Le(x=Be())&&(o.links=x)}},hostAttrs:[1,"nav"],hostVars:4,hostBindings:function(r,o){r&1&&G("keydown.arrowLeft",function(x){return o.onKeyDown(x)})("keydown.arrowRight",function(x){return o.onKeyDown(x)})("keydown.arrowDown",function(x){return o.onKeyDown(x)})("keydown.arrowUp",function(x){return o.onKeyDown(x)})("keydown.Home",function(x){return o.onKeyDown(x)})("keydown.End",function(x){return o.onKeyDown(x)})("focusout",function(x){return o.onFocusout(x)}),r&2&&(je("aria-orientation",o.orientation==="vertical"&&o.roles==="tablist"?"vertical":void 0)("role",o.role?o.role:o.roles?"tablist":void 0),De("flex-column",o.orientation==="vertical"))},inputs:{activeId:"activeId",animation:"animation",destroyOnHide:"destroyOnHide",orientation:"orientation",roles:"roles",keyboard:"keyboard"},outputs:{activeIdChange:"activeIdChange",shown:"shown",hidden:"hidden",navChange:"navChange"},exportAs:["ngbNav"],features:[Dt]})}}return i})(),ze=(()=>{class i{constructor(e){this.role=e,this.navItem=j(Ge),this.nav=j(Pe),this.nativeElement=j(Me).nativeElement}get tabindex(){return this.nav.keyboard===!1?this.navItem.disabled?-1:void 0:this.nav._navigatingWithKeyboard||this.navItem.disabled||!this.navItem.active?-1:void 0}static{this.\u0275fac=function(r){return new(r||i)(Qe("role"))}}static{this.\u0275dir=ge({type:i,selectors:[["","ngbNavLink",""]],hostAttrs:[1,"nav-link"],hostVars:12,hostBindings:function(r,o){r&2&&(ke("id",o.navItem.domId),je("role",o.role?o.role:o.nav.roles?"tab":void 0)("tabindex",o.tabindex)("aria-controls",o.navItem.isPanelInDom()?o.navItem.panelDomId:null)("aria-selected",o.navItem.active)("aria-disabled",o.navItem.disabled),De("nav-item",o.navItem.isNgContainer())("active",o.navItem.active)("disabled",o.navItem.disabled))}})}}return i})(),on=(()=>{class i extends ze{static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Rt(i)))(o||i)}})()}static{this.\u0275dir=ge({type:i,selectors:[["button","ngbNavLink",""]],hostAttrs:["type","button"],hostVars:1,hostBindings:function(r,o){r&1&&G("click",function(){return o.nav.click(o.navItem)}),r&2&&ke("disabled",o.navItem.disabled)},features:[Tt]})}}return i})();var Cn=({classList:i})=>(i.remove("show"),()=>i.remove("active")),xn=(i,a)=>{a&&zt(i),i.classList.add("show")},tn=(()=>{class i{constructor(){this.nativeElement=j(Me).nativeElement}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275dir=ge({type:i,selectors:[["","ngbNavPane",""]],hostAttrs:[1,"tab-pane"],hostVars:5,hostBindings:function(r,o){r&2&&(ke("id",o.item.panelDomId),je("role",o.role?o.role:o.nav.roles?"tabpanel":void 0)("aria-labelledby",o.item.domId),De("fade",o.nav.animation))},inputs:{item:"item",nav:"nav",role:"role"}})}}return i})(),an=(()=>{class i{constructor(){this._cd=j(rt),this._ngZone=j(St),this._activePane=null}isPanelTransitioning(e){return this._activePane?.item===e}ngAfterViewInit(){this._updateActivePane(),this.nav.navItemChange$.pipe(Re(this.nav.destroyRef),kt(this._activePane?.item||null),Ct(),xt(1)).subscribe(e=>{let r={animation:this.nav.animation,runningTransition:"stop"};this._cd.detectChanges(),this._activePane?at(this._ngZone,this._activePane.nativeElement,Cn,r).subscribe(()=>{let o=this._activePane?.item;this._activePane=this._getPaneForItem(e),this._cd.markForCheck(),this._activePane&&(this._activePane.nativeElement.classList.add("active"),at(this._ngZone,this._activePane.nativeElement,xn,r).subscribe(()=>{e&&(e.shown.emit(),this.nav.shown.emit(e.id))})),o&&(o.hidden.emit(),this.nav.hidden.emit(o.id))}):this._updateActivePane()})}_updateActivePane(){this._activePane=this._getActivePane(),this._activePane?.nativeElement.classList.add("show","active")}_getPaneForItem(e){return this._panes&&this._panes.find(r=>r.item===e)||null}_getActivePane(){return this._panes&&this._panes.find(e=>e.item.active)||null}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=me({type:i,selectors:[["","ngbNavOutlet",""]],viewQuery:function(r,o){if(r&1&&qt(tn,5),r&2){let c;Le(c=Be())&&(o._panes=c)}},hostAttrs:[1,"tab-content"],inputs:{paneRole:"paneRole",nav:[0,"ngbNavOutlet","nav"]},attrs:hn,decls:2,vars:0,consts:[["ngbNavPane","",3,"item","nav","role"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,o){r&1&&ve(0,_n,1,1,null,null,Se),r&2&&_e(o.nav.items)},dependencies:[tn,Bt],encapsulation:2,changeDetection:0})}}return i})();var sn=(()=>{class i{static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275mod=Ot({type:i})}static{this.\u0275inj=It({})}}return i})();function kn(i,a){if(i&1&&(Ke(0,"span",4),N(1),Ae()),i&2){let e=I();v(),ce(" - ",e.description())}}var We=class i{field=ue.required();value=ue.required();groupName=ue();description=ue();checked=Lt(!1);inputId=ye(()=>{let a=this.groupName();return a?`cb_${this.field()}_${a}_${this.value()}`:`cb_${this.field()}_${this.value()}`});onChange(a){let e=a.target.checked;this.checked.set(e)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=me({type:i,selectors:[["app-jql-value-checkbox"]],inputs:{field:[1,"field"],value:[1,"value"],groupName:[1,"groupName"],description:[1,"description"],checked:[1,"checked"]},outputs:{checked:"checkedChange"},decls:6,vars:5,consts:[[1,"form-check"],["type","checkbox",1,"form-check-input",3,"change","id","checked"],[1,"form-check-label",3,"for"],[1,"fw-bold","font-monospace"],[1,"fw-light","text-secondary"]],template:function(e,r){e&1&&(Ke(0,"div",0)(1,"input",1),Mt("change",function(c){return r.onChange(c)}),Ae(),Ke(2,"label",2)(3,"span",3),N(4),Ae(),X(5,kn,2,1,"span",4),Ae()()),e&2&&(v(),ke("id",r.inputId())("checked",r.checked()),v(),ke("htmlFor",r.inputId()),v(2),we(r.value()),v(),ee(r.description()?5:-1))},encapsulation:2})};var wn=()=>[],dn=(i,a)=>a.jiraValue;function Nn(i,a){if(i&1&&(f(0,"div",2),z(1,"i",5),f(2,"span",6),N(3),h(),f(4,"span",7),N(5),h()()),i&2){let e=I(2);v(3),we(e.ungroupedLabel),v(2),ce(" ",e.fieldConfig().ungrouped.length," ")}}function In(i,a){if(i&1){let e=be();f(0,"app-jql-value-checkbox",8),G("checkedChange",function(o){let c=Z(e).$implicit,x=I(2);return Y(x.onCheckboxChange(c.jiraValue,o))}),h()}if(i&2){let e=a.$implicit,r=I(2);H("field",r.field())("value",e.jiraValue)("description",e.description)("checked",r.isSelected(e.jiraValue))}}function En(i,a){if(i&1&&(f(0,"div",1),X(1,Nn,6,2,"div",2),f(2,"div",3),ve(3,In,1,4,"app-jql-value-checkbox",4,dn),h()()),i&2){let e=I();v(),ee(e.hasGroups()?1:-1),v(2),_e(e.fieldConfig().ungrouped)}}function Sn(i,a){if(i&1){let e=be();f(0,"app-jql-value-checkbox",13),G("checkedChange",function(o){let c=Z(e).$implicit,x=I(2);return Y(x.onCheckboxChange(c.jiraValue,o))}),h()}if(i&2){let e=a.$implicit,r=I().$implicit,o=I();H("field",o.field())("groupName",r)("value",e.jiraValue)("description",e.description)("checked",o.isSelected(e.jiraValue))}}function Dn(i,a){if(i&1&&(f(0,"div",1)(1,"div",9),z(2,"i",10),f(3,"span",6),N(4),h(),f(5,"span",11),N(6),h()(),f(7,"div",3),ve(8,Sn,1,5,"app-jql-value-checkbox",12,dn),h()()),i&2){let e,r,o=a.$implicit,c=I();v(4),we(o),v(2),ce(" ",((e=c.fieldConfig().groups)==null||e[o]==null?null:e[o].length)??0," "),v(2),_e(((r=c.fieldConfig().groups)==null?null:r[o])??$e(2,wn))}}var Ze=class i{field=ue.required();fieldConfig=ue.required();selectionsForField=ue({});selectionChange=At();ungroupedLabel="Everything Else";groupNames=ye(()=>Object.keys(this.fieldConfig()?.groups??{}));hasGroups=ye(()=>this.groupNames().length>0);isSelected(a){return!!this.selectionsForField()[a]}onCheckboxChange(a,e){this.selectionChange.emit({field:this.field(),value:a,checked:e})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=me({type:i,selectors:[["app-jql-group-columns"]],inputs:{field:[1,"field"],fieldConfig:[1,"fieldConfig"],selectionsForField:[1,"selectionsForField"]},outputs:{selectionChange:"selectionChange"},decls:4,vars:1,consts:[[1,"row","g-4"],[1,"col-12","col-md-6","col-lg-4"],[1,"mb-2","d-flex","align-items-center","gap-2","text-body-secondary","small","fw-bold"],[1,"checkbox-group-container"],[3,"field","value","description","checked"],[1,"bi","bi-collection-fill","opacity-50"],[1,"text-uppercase","tracking-wider"],[1,"badge","rounded-pill","bg-body-secondary","text-body-secondary","border","px-2"],[3,"checkedChange","field","value","description","checked"],[1,"mb-2","d-flex","align-items-center","gap-2","small","fw-bold","text-body"],[1,"bi","bi-folder-fill","text-primary","opacity-75"],[1,"badge","rounded-pill","bg-primary-subtle","text-primary-emphasis","border","border-primary-subtle","px-2"],[3,"field","groupName","value","description","checked"],[3,"checkedChange","field","groupName","value","description","checked"]],template:function(e,r){if(e&1&&(f(0,"div",0),X(1,En,5,1,"div",1),ve(2,Dn,10,3,"div",1,Se),h()),e&2){let o;v(),ee((o=r.fieldConfig().ungrouped)!=null&&o.length?1:-1),v(),_e(r.groupNames())}},dependencies:[We],encapsulation:2})};var Rn=()=>({});function Fn(i,a){if(i&1&&(f(0,"span",23),z(1,"i",33),N(2),h()),i&2){let e=I(2);v(2),ce(" ",e.csvFileName()," ")}}function On(i,a){i&1&&(f(0,"span",24),N(1,"No file selected"),h())}function Tn(i,a){i&1&&(f(0,"div",27),z(1,"i",34),f(2,"p",35),N(3,"Drop CSV to Load"),h()())}function Mn(i,a){if(i&1&&(f(0,"div",32),z(1,"i",36),N(2," Active configuration detected for "),f(3,"strong"),N(4),h(),N(5," Jira fields. "),h()),i&2){let e=I(2);v(4),we(e.fieldKeys().length)}}function qn(i,a){if(i&1){let e=be();f(0,"div",10)(1,"div",11)(2,"div")(3,"h2",12),N(4,"CSV Configuration"),h(),f(5,"p",13),N(6," Paste or Drag & Drop a CSV with "),f(7,"code"),N(8,"jiraField, jiraValue, description, group"),h()()(),f(9,"button",14),G("click",function(){Z(e);let o=I();return Y(o.clearLocalConfig())}),z(10,"i",15),N(11," Clear "),h()(),f(12,"div",16)(13,"div",17)(14,"label",18),z(15,"i",19),N(16," Upload CSV "),f(17,"input",20),G("change",function(o){Z(e);let c=I();return Y(c.onFileSelected(o))}),h()(),z(18,"div",21),f(19,"div",22),X(20,Fn,3,1,"span",23)(21,On,2,0,"span",24),h()()(),f(22,"div",25)(23,"textarea",26,1),G("fileDropped",function(o){Z(e);let c=I();return Y(c.onFileDropped(o))})("ngModelChange",function(o){Z(e);let c=I();return Y(c.csvInput.set(o))}),N(25,"                    "),h(),X(26,Tn,4,0,"div",27),h(),f(27,"div",28)(28,"button",29),G("click",function(){Z(e);let o=I();return Y(o.loadSampleCsv())}),z(29,"i",30),N(30," Load sample CSV "),h(),f(31,"button",31),G("click",function(){Z(e);let o=I();return Y(o.onApplyCsv())}),N(32," Apply Configuration "),h()(),X(33,Mn,6,1,"div",32),h()}if(i&2){let e=it(24),r=I();v(9),H("disabled",!r.csvInput()&&!r.fieldKeys().length),v(11),ee(r.csvFileName()?20:21),v(3),De("file-over",e.fileOver),H("ngModel",r.csvInput()),v(3),ee(e.fileOver?26:-1),v(5),H("disabled",!r.csvInput()||!r.csvInput().trim()),v(2),ee(r.fieldKeys().length?33:-1)}}function jn(i,a){if(i&1){let e=be();f(0,"div",43)(1,"div",46)(2,"h3",47),N(3),h()(),f(4,"div",48)(5,"app-jql-group-columns",49),G("selectionChange",function(o){Z(e);let c=I(3);return Y(c.onFieldSelectionChange(o))}),h()()()}if(i&2){let e=a.$implicit,r=I(3);v(3),ce(" ",e," "),v(2),H("field",e)("fieldConfig",r.grouped()[e])("selectionsForField",r.selections()[e]||$e(4,Rn))}}function An(i,a){if(i&1){let e=be();f(0,"textarea",50),G("ngModelChange",function(o){Z(e);let c=I(3);return Y(c.manualQuery.set(o))}),N(1,"                         "),h(),f(2,"div",28)(3,"button",51),G("click",function(){Z(e);let o=I(3);return Y(o.resetQuery())}),z(4,"i",52),N(5," Reset to Generated "),h(),z(6,"app-copy-to-clipboard-btn",53),h()}if(i&2){let e=I(3);H("ngModel",e.manualQuery()),v(6),H("textToCopy",e.manualQuery()||e.generatedJql())}}function Ln(i,a){i&1&&(f(0,"div",45)(1,"p",54),N(2,"Select at least one value above to generate JQL."),h()())}function Bn(i,a){if(i&1&&(f(0,"div",42),ve(1,jn,6,5,"div",43,Se),h(),f(3,"h3",44),N(4,"Generated JQL"),h(),X(5,An,7,2)(6,Ln,3,0,"div",45)),i&2){let e=I(2);v(),_e(e.fieldKeys()),v(4),ee(e.generatedJql()?5:6)}}function Vn(i,a){i&1&&(f(0,"div",41),z(1,"i",55),f(2,"p",56),N(3,"No configuration loaded. Start in the "),f(4,"strong"),N(5,"Config"),h(),N(6," tab."),h()())}function Pn(i,a){if(i&1&&(f(0,"div",37)(1,"div",38)(2,"h2",39),N(3,"Values & Selection"),h(),f(4,"span",40),N(5),h()(),X(6,Bn,7,1)(7,Vn,7,0,"div",41),h()),i&2){let e=I();v(5),ce(" ",e.fieldKeys().length," Fields "),v(),ee(e.fieldKeys().length?6:7)}}var pt="tiny-dev-tools:jql-config-rows",ft="tiny-dev-tools:jql-selections",cn=class i{tool=Vt;csvInput=he("");csvFileName=he("");grouped=he({});selections=he({});manualQuery=he("");activeTab=he("config");fieldKeys=ye(()=>Object.keys(this.grouped()));generatedJql=ye(()=>en(this.grouped(),this.selections()));destroyRef=j(Ee);constructor(){tt(()=>{let a=this.selections();Object.keys(a).length&&localStorage.setItem(ft,JSON.stringify(a))})}ngOnInit(){this.loadFromLocalStorage()}onFileDropped(a){this.csvFileName.set(a.name),ot(a).pipe(Re(this.destroyRef)).subscribe({next:e=>{this.csvInput.set(e)},error:e=>{console.error(e),this.csvFileName.set("Error loading file")}})}onFileSelected(a){let r=a.target.files?.[0];r&&(this.csvFileName.set(r.name),ot(r).pipe(Re(this.destroyRef)).subscribe({next:o=>{this.csvInput.set(o)},error:o=>{console.error(o),this.csvFileName.set("Error loading file")}}))}updateManualQuery(){this.manualQuery.set(this.generatedJql())}onApplyCsv(){let a=Xt(this.csvInput());if(!a.length){this.clearLocalConfig();return}let e=dt(a);this.grouped.set(e);let r=this.createInitialSelections(e);this.selections.set(r),localStorage.setItem(pt,JSON.stringify(a)),this.updateManualQuery(),this.activeTab.set("query")}onFieldSelectionChange(a){this.selections.update(e=>{let r=Ue(He({},e[a.field]),{[a.value]:a.checked});return Ue(He({},e),{[a.field]:r})}),this.updateManualQuery()}loadFromLocalStorage(){try{let a=localStorage.getItem(pt);if(!a)return;let e=JSON.parse(a),r=dt(e);this.grouped.set(r);let o=localStorage.getItem(ft);o?this.selections.set(JSON.parse(o)):this.selections.set(this.createInitialSelections(r)),this.updateManualQuery(),this.fieldKeys().length&&this.activeTab.set("query")}catch(a){console.warn("Failed to load JQL config",a)}}createInitialSelections(a){let e={};for(let r of Object.keys(a)){e[r]={};let o=a[r];[...o.ungrouped||[],...Object.values(o.groups||[]).flat()].forEach(c=>e[r][c.jiraValue]=!1)}return e}clearLocalConfig(){this.grouped.set({}),this.selections.set({}),this.csvInput.set(""),this.csvFileName.set(""),this.manualQuery.set(""),localStorage.removeItem(pt),localStorage.removeItem(ft),this.activeTab.set("config")}resetQuery(){this.updateManualQuery()}loadSampleCsv(){this.csvInput().trim()&&!confirm("Replace the current CSV with a sample?")||(this.csvFileName.set("sample-jira-config.csv"),this.csvInput.set(`jiraField,jiraValue,description,group
project,DEV,Main dev project,
component,Core,Shared core logic,
component,UI,User-facing stuff,
"Epic Link",DEV-42,The big thing we\u2019re working on,
labels,cleanup,Tech debt nobody loves,
labels,frontend,All things UI,
labels,home,Home screen,UI Screens
labels,settings,Settings screen,UI Screens
`))}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=me({type:i,selectors:[["app-jql-but-reusable"]],decls:13,vars:5,consts:[["nav","ngbNav"],["dnd","appDragAndDrop"],[3,"tool"],[1,"card","border-0","bg-transparent"],["ngbNav","",1,"nav","nav-tabs","px-3",3,"activeIdChange","activeId"],[1,"nav-item",3,"ngbNavItem"],["type","button","ngbNavLink","",1,"nav-link","fw-bold"],["ngbNavContent",""],[3,"ngbNavItem"],[3,"ngbNavOutlet"],[1,"card-body","pt-4"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"h5","mb-1","fw-bold"],[1,"text-body-secondary","small","mb-0"],["type","button",1,"btn","btn-sm","btn-outline-danger","rounded-pill","px-3",3,"click","disabled"],[1,"bi","bi-trash3","me-1"],[1,"card","bg-body-tertiary","border-0","mb-3","rounded-4"],[1,"card-body","p-3","d-flex","align-items-center","gap-3"],[1,"btn","btn-primary","btn-sm","rounded-pill","px-3","mb-0"],[1,"bi","bi-file-earmark-arrow-up","me-1"],["type","file","accept",".csv,text/csv",1,"d-none",3,"change"],[1,"vr","text-secondary","opacity-25"],[1,"flex-grow-1","small"],[1,"text-primary","fw-bold"],[1,"text-body-tertiary"],[1,"mb-4","position-relative"],["appDragAndDrop","","id","ta_csv","placeholder","Paste CSV rows here...","rows","10",1,"form-control","tool-textarea","drop-zone","rounded-4",3,"fileDropped","ngModelChange","ngModel"],[1,"dnd-overlay","d-flex","flex-column","align-items-center","justify-content-center","rounded-4"],[1,"d-flex","justify-content-between","align-items-center"],["type","button",1,"btn","btn-link","btn-sm","text-primary","text-decoration-none","p-0","fw-medium",3,"click"],[1,"bi","bi-lightbulb"],["type","button",1,"btn","btn-primary","rounded-pill","px-4",3,"click","disabled"],[1,"alert","bg-primary-subtle","text-primary-emphasis","py-3","px-3","mt-4","mb-0","small","border-0","rounded-4"],[1,"bi","bi-file-check-fill","me-1"],[1,"bi","bi-file-earmark-arrow-up","display-4","text-primary"],[1,"fw-bold","text-primary","mt-2"],[1,"bi","bi-info-circle-fill","me-2"],[1,"card-body","d-flex","flex-column","pt-4"],[1,"d-flex","justify-content-between","align-items-end","mb-3"],[1,"h5","fw-bold","mb-0"],[1,"badge","rounded-pill","bg-primary-subtle","text-primary-emphasis","border","border-primary-subtle"],[1,"text-center","py-5"],[1,"mb-4","container-fluid","border-0","rounded-4","bg-body-tertiary","p-3",2,"max-height","500px","overflow-y","auto"],[1,"row","py-3","border-bottom","last-child-border-0"],[1,"h6","fw-bold","mb-3"],[1,"text-center","py-5","bg-body-tertiary","rounded-4"],[1,"col-12","col-md-3","col-lg-2"],[1,"fw-bold","fs-6","text-uppercase","text-body-secondary","mb-2","mb-md-0"],[1,"col"],[3,"selectionChange","field","fieldConfig","selectionsForField"],["rows","5","placeholder","JQL will appear here...",1,"form-control","tool-textarea","mb-3","rounded-4",3,"ngModelChange","ngModel"],[1,"btn","btn-link","btn-sm","text-body-secondary","text-decoration-none",3,"click"],[1,"bi","bi-arrow-counterclockwise"],[3,"textToCopy"],[1,"text-body-secondary","mb-0"],[1,"bi","bi-clipboard-x","display-1","text-body-tertiary"],[1,"text-body-secondary","mt-3"]],template:function(e,r){if(e&1){let o=be();f(0,"app-tool-layout",2)(1,"div",3)(2,"ul",4,0),G("activeIdChange",function(x){return Z(o),Y(r.activeTab.set(x))}),f(4,"li",5)(5,"button",6),N(6,"Config"),h(),qe(7,qn,34,8,"ng-template",7),h(),f(8,"li",8)(9,"button",6),N(10,"Query"),h(),qe(11,Pn,8,2,"ng-template",7),h()(),z(12,"div",9),h()()}if(e&2){let o=it(3);H("tool",r.tool),v(2),H("activeId",r.activeTab()),v(2),H("ngbNavItem","config"),v(4),H("ngbNavItem","query"),v(4),H("ngbNavOutlet",o)}},dependencies:[Jt,Pt,$t,Ut,Qt,Kt,sn,ut,Pe,Ge,rn,on,ze,an,Ze,Ht],encapsulation:2})};export{cn as JqlButReusable};
