@use "assets/scss/bootstrap" as bootstrap;
@use "assets/scss/dragAndDrop";

/* src/styles.scss */
[data-bs-theme="light"] {
  --bs-body-bg: #ffffff;
  --bs-tertiary-bg: #f8f9fa; // Sidebar background
  --bs-border-color: #e0e0e0; // Softer gray for light mode

  /* High-contrast Purple for Light Mode */
  --bs-primary: #6200ee;
  --bs-primary-rgb: 98, 0, 238;

  /* The "Subtle" areas (Alerts, active nav items) */
  --bs-primary-bg-subtle: #f3efff;
  --bs-primary-border-subtle: #eaddff;
  --bs-primary-text-emphasis: #523d8a;
}

[data-bs-theme="dark"] {
  /* Branding & Actions */
  --bs-primary: #bb86fc;
  --bs-primary-rgb: 187, 134, 252;

  /* Subtle Surfaces (Badges/Alerts) */
  --bs-primary-bg-subtle: #2d1b4d;
  --bs-primary-border-subtle: #4f378b;
  --bs-primary-text-emphasis: #d0bcff;

  /* Google Surfaces */
  --bs-body-bg: #202124;
  --bs-body-bg-rgb: 32, 33, 36;
  --bs-tertiary-bg: #2d2e31;
  --bs-body-color: #e8eaed;
  --bs-secondary-color: #9aa0a6;
  --bs-tertiary-color: #5f6368;
  --bs-border-color: #3c4043;

  /* Selection Glow (v1.0.1 polish) */
  ::selection {
    background-color: rgba(187, 134, 252, 0.3);
    color: #ffffff;
  }
}

/* Modern, Theme-Aware Scrollbars */
html {
  /* Google-style thin scrollbars */
  scrollbar-width: thin;

  // Light Mode
  scrollbar-color: #dadce0 transparent;

  // Dark Mode override
  &[data-bs-theme="dark"] {
    scrollbar-color: #5f6368 transparent;
  }
}

/* Optional: For Chrome/Edge/Safari specific fine-tuning */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background-color: #dadce0;
  border-radius: 20px;
  border: 2px solid transparent; // Adds a little padding around the thumb
  background-clip: content-box;
}

[data-bs-theme="dark"] ::-webkit-scrollbar-thumb {
  background-color: #5f6368;
}

header, footer {
  transition: background-color 0.3s ease, border-color 0.3s ease;
}

.tool-textarea {
  font-family: var(--bs-font-monospace), monospace;
  font-size: 0.875rem;
  line-height: 1.5;
  background-color: var(--bs-body-bg);
  border: 1px solid var(--bs-border-color);
  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;

  &:focus {
    background-color: var(--bs-body-bg);
    border-color: var(--bs-primary-border-subtle);
    box-shadow: 0 0 0 0.25rem rgba(var(--bs-primary-rgb), 0.1);
  }
}

/* Ensure all form controls respect the theme variables */
.form-control, .form-select {
  background-color: var(--bs-body-bg);
  color: var(--bs-body-color);
  border-color: var(--bs-border-color);

  &:focus {
    background-color: var(--bs-body-bg);
    color: var(--bs-body-color);
    border-color: var(--bs-primary);
    box-shadow: 0 0 0 0.25rem rgba(var(--bs-primary-rgb), 0.15);
  }

  /* Fix for Chrome's autofill yellow background */
  &:-webkit-autofill {
    -webkit-box-shadow: 0 0 0 1000px var(--bs-body-bg) inset !important;
    -webkit-text-fill-color: var(--bs-body-color) !important;
  }
}

/* Specific fix for textareas in your tools */
textarea.form-control {
  font-family: var(--bs-font-monospace), monospace;
}

.form-control::file-selector-button {
  background-color: var(--bs-tertiary-bg);
  color: var(--bs-body-color);
  border-inline-end-width: 1px;
  border-inline-end-color: var(--bs-border-color);
  transition: all 0.2s ease-in-out;

  &:hover {
    background-color: var(--bs-secondary-bg);
  }
}

/* Fix for the JQL Uploader "Selection Area" */
.input-group-text {
  background-color: var(--bs-tertiary-bg);
  color: var(--bs-secondary-color);
  border-color: var(--bs-border-color);
}

.list-group-item.active {
  background-color: var(--bs-primary-bg-subtle) !important;
  color: var(--bs-primary-text-emphasis) !important;
  border: none;
}

.form-control, .form-select, .btn, .card, .tool-textarea {
  border-radius: 12px; // The "Google" sweet spot
}

/* Specific for the "Pill" look on primary buttons */
.btn-primary {
  border-radius: 50px;
}

.nav-tabs {
  --bs-nav-tabs-border-width: 0;
  --bs-nav-tabs-link-hover-bg: var(--bs-tertiary-bg);
  --bs-nav-tabs-link-active-bg: transparent;
  --bs-nav-tabs-link-active-color: var(--bs-primary);
  border-bottom: 1px solid var(--bs-border-color);
  gap: 8px;

  .nav-link {
    border: none;
    border-bottom: 3px solid transparent;
    border-radius: 0;
    padding: 0.75rem 1rem;
    color: var(--bs-secondary-color);
    transition: all 0.2s ease;

    &:hover {
      color: var(--bs-body-color);
    }

    &.active {
      border-bottom-color: var(--bs-primary);
      color: var(--bs-primary) !important;
    }
  }
}

.last-child-border-0:not(:last-child) {
  border-bottom: 1px solid var(--bs-border-color-translucent) !important;
}

/* Enhance readability for primary-subtle badges */
.badge {
  line-height: 1;
  font-size: 0.75rem;

  &.bg-primary-subtle {
    /* Ensures the purple is "punchy" and readable */
    color: var(--bs-primary-text-emphasis) !important;
    border-color: var(--bs-primary-border-subtle) !important;

    [data-bs-theme="dark"] & {
      background-color: rgba(var(--bs-primary-rgb), 0.2) !important;
      color: #d0bcff !important; /* Brighter purple for dark mode legibility */
    }
  }
}

/* Modern tracking for tool headers */
.tracking-wider {
  letter-spacing: 0.05rem;
  font-size: 0.75rem;
}

/* Ensure purple badges are punchy in Dark Mode */
.badge.bg-primary-subtle {
  font-weight: 700;

  [data-bs-theme="dark"] & {
    background-color: rgba(var(--bs-primary-rgb), 0.2);
    color: var(--bs-primary-border-subtle);
  }
}

.btn-primary {
  // Use the main theme purple
  --bs-btn-bg: var(--bs-primary);
  --bs-btn-border-color: var(--bs-primary);

  // Hover states
  --bs-btn-hover-bg: var(--bs-primary-text-emphasis);
  --bs-btn-hover-border-color: var(--bs-primary-text-emphasis);

  // Ensure text is readable (Dark purple on Light, White on Dark)
  color: #fff !important;
  font-weight: 600;
}

/* Specific fix for the 'Apply' button if it's still looking lilac */
button.btn-primary:not(:disabled) {
  background-color: var(--bs-primary) !important;
  border-color: var(--bs-primary) !important;
}